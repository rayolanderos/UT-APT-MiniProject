{% extends "layout.html" %}
{% block content %}

      <h1 class="text-center text-lg-left">Manage Streams </h1>

      <div class="section">
        <h2 class="text-center text-lg-left">Streams I own</h2>
        <div class="stream-list-container">
          <form method="post" action="" class="delete-form">
            <table id="table-streams-i-own" class="table table-striped table-responsive table-fullwidth">
              <thead class="thead-inverse">
                <tr>
                  <th>Name</th>
                  <th class="text-center">Last New Picture</th>
                  <th class="text-center">Number of Pictures</th>
                  <th class="text-center">Delete</th>
                </tr>
              </thead>
              <tbody>
              {% for stream_own in streams_own %}
                <tr>
                  <td><a href="/view?id={{ stream_own.id }}">{{ stream_own.name }}</a></td>
                  <td class="text-center">{{ stream_own.date }}</td>
                  <td class="text-center">{{ stream_own.photo_count }}</td>
                  <td class="text-center"><input type="checkbox" name="delete-stream" value="{{ stream_own.id }}"/></td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
            <button type="submit" class="btn btn-danger pull-right"><i class="fa fa-trash" aria-hidden="true"></i> Delete</button>
            <div class="clear"></div>
          </form>
        </div>
      </div>
      <div class="section">
        <h2 class="text-center text-lg-left">Streams I subscribe to</h2>
        <div class="stream-list-container">
          <form method="POST" action="" class="unsubscribe-form">
            <table id="table-streams-i-subscribe" class="table table-striped table-responsive table-fullwidth">
              <thead class="thead-inverse">
                <tr>
                  <th>Name</th>
                  <th class="text-center">Last New Picture</th>
                  <th class="text-center">Number of Pictures</th>
                  <th class="text-center">Views</th>
                  <th class="text-center">Unsubscribe</th>
                </tr>
              </thead>
              <tbody>
                {% for stream in streams_subscribed %}
                <tr>
                  <td><a href="/view?id={{ stream.id }}">{{ stream.name }}</a></td>
                  <td class="text-center">{{ stream.date }}</td>
                  <td class="text-center">{{ stream.photo_count }}</td>
                  <td class="text-center">{{ stream.all_time_views }}</td>
                  <td class="text-center"><input type="checkbox" name="unsubscribe-stream" value="{{ stream.id }}"/></td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
            <button type="submit" class="btn btn-danger pull-right"><i class="fa fa-ban" aria-hidden="true"></i> Unsubscribe</button>
            <div class="clear"></div>
          </form>
        </div>
      </div>
{% endblock %}

{% block scripts %}
  <script type="text/javascript" charset="utf8" src="vendor/datatables/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" charset="utf8" src="js/manage.js"></script>
{% endblock %}